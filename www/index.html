<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.min.css">
    <link rel="stylesheet" type="text/css" href="index.css">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/mustache.js/0.7.0/mustache.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/formdata.js"></script>
    <script src="js/mailcheck.min.js"></script>
    <script src="helpers.js"></script>
    <script src="addevent.js"></script>
    <script src="datepicker.js"></script>
    <script src="main.js"></script>
    <title>S H I F T to Bikes</title>
</head>
<body>
    <nav class="navbar navbar-default">   
        <div class="navbar-header">
            <a class="navbar-brand" href="/">
                <img alt="Shift2Bikes" src="images/shiftLogo_plain.gif" />
            </a>
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>   
        </div>
        <div id="navbar" class="collapse navbar-collapse navbar-right">
            <ul class="nav navbar-nav">
                <li class="dropdown">
                    <a href="#" id="view-events-button">Events</a>
                </li>
                <li>
                    <a href="#" id="add-event-button">Add Event</a>
                </li>
                <li>
                    <a href="#" id="pedalpalooza-button">Pedalpalooza</a>
                </li>
                <li>
                    <a href="#" id="oldSite-button">Old Website</a>
                </li>
                <li>                    
                    <a href="#" id="about-button">About</a>
                </li>
            </ul>
        </div>
    </nav>
    
    <div id="mustache-html" class="container"></div>

    <div class="modal fade" tabindex="-1" id="cancel-modal" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <h4>Are you sure you want to cancel?</h4>
                </div>
                <div class="modal-footer">
                    <button type="button" id="confirm-cancel" data-dismiss="modal" class="btn btn-warning">Yes</button>
                    <button type="button" class="btn" data-dismiss="modal">No</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div class="modal fade" tabindex="-1" id="delete-modal" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <h4>Are you sure you want to delete this event?</h4>
                </div>
                <div class="modal-footer">
                    <button type="button" id="confirm-delete" data-dismiss="modal" class="btn btn-warning">Yes</button>
                    <button type="button" class="btn" data-dismiss="modal">No</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div class="modal fade" tabindex="-1" id="success-modal" role="dialog">
        <div class="modal-dialog modal-sm">
            <div class="modal-content">
                <div class="modal-body">
                    <p id="success-message"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn" data-dismiss="modal" id="success-ok">OK</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <script id="pedalpalooza-header" type="text/template">
        <img alt="Pedalpalooza" id="pedalpalooza-img" src="images/pp2016.jpg">
        <div class="pg-width">
    	    <p> Pedalpalooza is 3+ weeks of bikey fun. With ~300 different events, most organized by individuals, bikers of all persuasions are likely to find many events of interest. Nearly all events are free. </p>
    	    <p> Visiting from out of town? We've started a <a href="http://www.shift2bikes.org/allbike.php#Visitor_Info">Visitor Info</a> page on our Wiki.</p>
    	</div>
        <div id="date-select-container-pedalpalooza" class="date-select-container-style form-group">
            <table class="day-of-week">
                <tbody><tr>
                    <td class="calendar-month-title"></td>
                    <td>Sun</td>
                    <td>Mon</td>
                    <td>Tue</td>
                    <td>Wed</td>
                    <td>Thu</td>
                    <td>Fri</td>
                    <td>Sat</td>
                </tr></tbody>
            </table>
            <div id="date-select-pp">
                <table id="date-picker-pedalpalooza" class="date-picker-style">
                    <tr class="calendar-row">
                        <td rowspan="3" class="calendar-month-title"><span>June 2016</span></td>
                        <td class="calendar-day   color-jun-odd"></td>
                        <td class="calendar-day   color-jun"></td>
                        <td class="calendar-day   color-jun-odd"></td>
                        <td class="calendar-day   color-jun"></td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-09">9</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-10">10</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-11">11</td>
                    </tr>
                    <tr class="calendar-row">
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-12">12</td>
                        <td class="calendar-day   color-jun" data-date='2016-06-13'>13</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-14">14</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-15">15</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-16">16</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-17">17</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-18">18</td>
                    </tr>
                    <tr class="calendar-row">
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-19">19</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-20">20</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-21">21</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-22">22</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-23">23</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-24">24</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-25">25</td>
                    </tr>

                    <tr class="calendar-row">
                        <td rowspan="2" class="calendar-month-title">&nbsp;</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-26">26</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-27">27</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-28">28</td>
                        <td class="calendar-day   color-jun" data-date="2016-06-29">29</td>
                        <td class="calendar-day   color-jun-odd" data-date="2016-06-30">30</td>
                        <td class="calendar-day   color-jul" data-date="2016-07-01">1</td>
                        <td class="calendar-day   color-jul-odd" data-date="2016-07-2">2</td>
                    </tr>
                    <tr class="calendar-row">
                        <td class="calendar-day   color-jul-odd" data-date="2016-07-03">3</td>
                        <td class="calendar-day   color-jul" data-date="2016-07-04">4</td>
                        <td class="calendar-day   color-jul-odd"></td>
                        <td class="calendar-day   color-jul"></td>
                        <td class="calendar-day   color-jul-odd"></td>
                        <td class="calendar-day   color-jul"></td>
                        <td class="calendar-day   color-jul-odd"></td>
                    </tr>
                </table>
            </div>
        </div>
    </script>
    
    <script id="pedalpalooza-prior" type="text/template">
        <a class="footer" href="http://www.shift2bikes.org/pedalpalooza/index.shtml">Pedalpalooza from prior years</a>
    </script>
        
    <script id="legend-template" type="text/template">
        <div class="plain">
        	<p class="audience-F">Family Friendly events have green times.</p>
        	<p class="audience-A">Adult Only (21+) events have red times.</p>
    	</div>
    </script>
    
    <script id="view-events-template" type="text/template">
        {{#dates}}
        <div data-date="{{yyyymmdd}}" class="date{{#preview}} preview{{/preview}}">
        <div class="secondaryHeader">{{date}}</div>
            {{#events}}
                <div class="event row" data-event-id="{{id}}">
                    <div class="time col-xs-4">
                        <h3 class="audience-{{audience}}">{{displayTime}}</h3>
                    </div>
                    <a name="event-{{id}}" id="event-{{id}}" class="expandDetails" href="#event-{{id}}" data-toggle="collapse" data-target="#detailsContainer{{id}}">
                        <div class="col-xs-8" >
                            <div class="summary">
                                <h3> {{title}} </h3>
                                <p> {{venue}} </p>
                                <p> {{address}} </p>
                                <p> {{length}}</p>
                            </div>
                        </div>
                    </a>
                    <div id="detailsContainer{{id}}" {{^ preview }}class="collapse"{{/ preview }}>
                        <div class="hideButton col-xs-4">
                            {{^ preview }}<button class="btn btn-expand" data-toggle="collapse" data-target="#detailsContainer{{id}}">Hide</button>{{/ preview }}
                        </div>
                        <div class="eventDetails col-xs-8">
                            <div class="otherButtons">
                                <a href="{{mapLink}}" target="_blank">
                                    <button class="btn btn-expand map">Map</button>
                                </a>{{^ preview }}
                               
                                {{#showEditButton}}<a href="#editEvent/{{id}}" >
                                    <button class="btn btn-default edit">Edit</button>
                                </a>{{/showEditButton}}{{/ preview }}
                            </div>
                            <div class="mainDetails">
                                {{# image}}
                                <img src="{{image}}" />
                                {{/ image}}
                                <p>{{details}}</p>
                                <p class="contactInfo">Organized by: {{organizer}}</p>
                                {{#email}}
                                <p class="email">Contact info: {{email}}</p>
                                {{/email}}
                            </div>
                        </div>
                    </div>
                </div>
            {{/events}}
        </div>
        {{/dates}}
    </script>
    
    <script id="load-more-template" type="text/template">
        <a id="load-more" class="footer" href="#">Show additional events</a>
    </script>
    
    <script id="mustache-edit" type="text/template">
        <div id="edit-header" >
           
                <button id="preview-edit-button" type="button" class="btn btn-addEvent">Edit</button>
                <button id="preview-button" type="button" class="btn btn-addEvent">Preview</button>
                <button id="save-button" type="button" class="btn btn-addEvent">Post</button>
            {{^ id }}
                <button id="cancel-button" type="button" class="btn btn-addEvent" data-toggle="modal" data-target="#cancel-modal">Cancel</button>
            {{/ id }}
            {{# id }}
                <button id="delete-button" type="button" class="btn btn-addEvent" data-toggle="modal" data-target="#delete-modal">Delete</button>
            {{/ id }}

            <span id="save-result"></span>
        </div>
        <br>
        <form id="event-entry">
            <input type="hidden" name="id" value="{{id}}" />
            <input type="hidden" name="secret" value="{{secret}}" />
            <div class="panel-group" role="tablist" id="event-fields">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a role="button" data-toggle="collapse" data-parent="#event-fields" href="#general-fields">
                            Required
                        </a>
                    </div>
                    
                    <div id="general-fields" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <div class="form-group">
                                <label class="control-label req-label" for="title">Event title</label>
                                <input type="text" class="form-control" name="title" id="title" value="{{title}}" required="true" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="details">Description</label>
                                <textarea class="form-control" name="details" id="details" >{{details}}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="control-label req-label" for="venue">Venue name</label>
                                <input type="text" class="form-control" name="venue" id="venue" value="{{venue}}" required="true" />
                            </div>
                            <div class="form-group">
                                <label class="control-label req-label" for="address">Address</label>
                                <input type="text" class="form-control" name="address" id="address" value="{{address}}" required="true" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="length">Length of route</label>
                                <select name="length" class="form-control" id="length">
                                    {{# lengthOptions }}
                                    <option value="{{range}}" {{# isSelected }}selected{{/ isSelected }}>{{range}} miles</option>
                                    {{/ lengthOptions }}
                                </select>
                            </div>
                            <div id="date-select-container" class="date-select-container-style form-group">
                                <table class="day-of-week">
                                    <tr>
                                        <td class="calendar-month-title"></td>
                                        <td>Sun</td>
                                        <td>Mon</td>
                                        <td>Tue</td>
                                        <td>Wed</td>
                                        <td>Thu</td>
                                        <td>Fri</td>
                                        <td>Sat</td>
                                    </tr>
                                </table>
                                <div id="date-select" class="date-select-style">
                                    <div id="load-earlier" class="loading-zone"></div>
                                    <table id="date-picker" class="date-picker-style">
                                    </table>
                                    <div id="load-later" class="loading-zone"></div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="control-label req-label" for="time">Time</label>
                                <select name="time" class="form-control" id="time">
                                    {{# timeOptions }}
                                    <option value="{{time}}" {{# isSelected }}selected{{/ isSelected }}>{{time}}</option>
                                    {{/ timeOptions }}
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="control-label req-label" for="organizer">Your name</label>
                                <input type="text" class="form-control" name="organizer" id="organizer" value="{{organizer}}" required="true" />
                            </div>
                            <div class="form-group">
                                <label class="control-label req-label" for="email">Your email</label>
                                <input type="text" class="form-control" name="email" id="email" value="{{email}}" required="true" />
                            </div>
                            <div class="checkbox">
                                <input type="hidden" name="email-me" value="0" />
                                <label class="control-label" for="email-me">
                                    <input type="checkbox" name="email-me" id="email-me" value="1"  {{# emailMe }}checked{{/ emailMe }} />
                                    Send forum messages to this email address
                                </label>
                            </div>
                            <div class="checkbox">
                                <input type="hidden" name="hideemail" value="0" />
                                <label class="control-label" for="hideemail">
                                    <input type="checkbox" name="hideemail" id="hideemail" value="1"  {{# hideemail }}checked{{/ hideemail }} />
                                    Don't publish my email address online
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a role="button" data-toggle="collapse" data-parent="#event-fields" href="#optional-fields">
                            Optional details
                        </a>
                    </div>
                    <div id="optional-fields" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="form-group">
                                <label class="control-label" for="timedetails">Time details</label>
                                <input type="text" class="form-control" name="timedetails" id="timedetails" value="{{timedetails}}" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="weburl">Website for more details</label>
                                <input type="text" class="form-control" name="weburl" id="weburl" value="{{weburl}}" />
                            </div>
                            {{# image}}
                            <img src="{{image}}" />
                            {{/ image}}
                            <div class="form-group">
                                {{# image}}
                                <label class="control-label" for="image">Update Image</label>
                                {{/ image}}
                                {{^ image}}
                                <label class="control-label" for="image">Image</label>
                                {{/ image}}
                                <input type="file" class="form-control" name="image" id="image" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="audience">Audience</label>
                                <select name="audience" class="form-control" id="audience">
                                    {{# audienceOptions }}
                                    <option value="{{code}}" {{# isSelected }}selected{{/ isSelected }}>{{text}}</option>
                                    {{/ audienceOptions }}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <a role="button" data-toggle="collapse" data-parent="#event-fields" href="#print-fields">
                            Print calendar
                        </a>
                    </div>
                    <div id="print-fields" class="panel-collapse collapse">
                        <div class="panel-body">
                            <div class="checkbox">
                                <input type="hidden" name="printevent" value="0" />
                                <label class="control-label" for="printevent">
                                    <input type="checkbox" name="printevent" id="printevent" value="1" {{# printevent }}checked{{/ printevent }} />
                                    Include in the print calendar? You must submit at least 3 weeks in advance. Inclusion not guaranteed.
                                </label>
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="tinytitle">Tiny title (24 chars)</label>
                                <input type="text" class="form-control" name="tinytitle" id="tinytitle" value="{{tinytitle}}" maxlength="24" />
                            </div>
                            <div class="form-group">
                                <label class="control-label" for="printdescr">Print description (120 chars)</label>
                                <textarea class="form-control" name="printdescr" id="printdescr" maxlength="120" >{{printdescr}}</textarea>
                            </div>
                            <!--div class="form-group">
                                <label class="control-label" for="printcontact">Print contact info</label>
                                <input type="text" class="form-control" name="printcontact" id="printcontact" value="{{printcontact}}" maxlength="255" />
                            </div-->
                        </div>
                    </div>
                </div>
            </div>
            <p>For tips on making your ride successful, we ask that you read the <a href="rideleadingcomic.html">Ride Leading Comic</a> at least once before submitting an event</p>
            <div class="checkbox">
                <input type="hidden" name="read_comic" value="0" />
                <label class="control-label" for="read_comic">
                    <input type="checkbox" name="read_comic" id="read_comic" value="1" {{# readComic }}checked{{/ readComic }} />
                    I have read the Ride Leading Comic
                </label>
            </div>
        </form>
    </script>
    <script id="mustache-select-month" type="text/template">
        {{#weeks}}
        <tr class="calendar-row">
            {{#monthTitle}}
            <td rowspan="{{weeksInMonth}}" class="calendar-month-title"><span>{{monthTitle}}</span></td>
            {{/monthTitle}}
            {{#days}}
            <td class="calendar-day {{classes}}" data-date="{{date}}">{{day}}</td>
            {{/days}}
        </tr>
        {{/weeks}}
    </script>
    
    <script id="aboutUs" type="text">
        <div id="about" >
        	<div class="secondaryHeader">About SHIFT</div>
			<div class="plain">
			    <br>
                <p>SHIFT helps other groups and individuals promote their "bike fun" events. Most of the events in this calendar are not produced by Shift. Anyone is welcome to post events. </p>
                <p>SHIFT is the force behind Pedalpalooza. It also coordinates fun bicycling events throughout the year. Our mission is to demonstrate that bicycling is fun, liberating, empowering, sustainable, and environmentally friendly. We ask for no membership, nor dues. We ask for only a shared passion for the bicycle in all its glory: as toy, as transportation, as tool for social and environmental change! </p>
                <p>Join the <a href="https://lists.riseup.net/www/subrequest/shift"> SHIFT listserve</a></p>
                <h3>Volunteer</h3>
                <p>Breakfast on the Bridges is the last friday of every month. Present breakfast to bike commuters in an interesting way - on a bridge! Contact the ever chortling Bard of the Bridges, <a href="http://www.shift2bikes.org/contacts/index.php?eCon=BonB">Timo</a></p>
                <p>Contribute to our <a href="http://github.com/Shift2Bikes/shiftcal">source code</a></p>
                <h3>Contact information</h3>
                <p>Contact us <a href="http://www.shift2bikes.org/contacts/">here</a></p>
                <h3>Our sponsors</h3>
                <a href="http://umbrellapdx.org/"> <image alt="Umbrella PDX" src="http://umbrellapdx.org/templates/tem_trentco/images/logo.jpg" width="125"/img></a>
                <br>
                <br>
                <a href="http://www.canvashost.com/"> <image alt="Canvas Host" src="http://www.canvashost.com/images/canvashost-mobile.jpg" width="125" /img></a>
                <br>
                <h3>Donations</h3>
                <p>Donations to SHIFT can be made by mailing a check addressed to: </p>
                <p>Shift c/o Umbrella </p>
                <p>820 SW 2nd Ave. Ste. 200</p>
                <p>Portland, OR 97204</p>
                <p>Our 501(c)3 sponsor, Umbrella, will handle the rest.</p>

            </div>
        </div>
	</script>
</body>
</html>
